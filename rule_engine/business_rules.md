# 业务规则

业务规则应用于每一条设备上报至平台的数据流，当数据流里的数据满足规则定义时触发相应的动作。
创建业务规则前，需要预先定义功能点与数据流。

### 功能点

功能点为产品/设备具备的最细粒度的能力或用途，一个产品可以包含多个功能点，点击产品详情页中的功能点即可查看该产品功能点列表。


功能点定义关键信息如下：

- 数据类型：该功能数据的格式，支持数值，枚举，字符串，故障，布尔值等，业务中必须传输 JSON 类型数据；
- 功能点标识：该功能数据在传输中使用的 JSON key 值。

定义示例：

- 某温度传感器需要定时上报温度信息，其上报 JSON 数据如下，`temperature` 即为功能点标识：

```
{
  "temperature": 77
}
```

该功能可按照下图定义：

![](/assets/function_create.png)



### 数据流

数据流为产品/设备能够产生或消费的业务信息报文。
一条数据流包含一个或多个功能点，一个产品可以定义多个数据流，但是同一产品下的数据流主题不能重复，点击产品详情页中的数据流即可查看该产品数据流列表。


数据流定义关键信息如下：

- 功能点：该数据流包含的功能点，可多选；
- 数据流主题：数据流用于通信的主题。

定义示例：

- 温湿度传感器需要上报温度与湿度信息，则数据流名称可以为温湿度数据流，功能点包含温度与湿度，主题为 `temp_hum`：

![](/assets/stream_create.png)